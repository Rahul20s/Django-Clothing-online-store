<!-- products/templates/products/product_detail.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'products:product_list' %}">Products</a></li>
        {% if product.category %}
            <li class="breadcrumb-item"><a href="{{ product.category.get_absolute_url }}">{{ product.category.name }}</a></li>
        {% endif %}
        <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
    </ol>
</nav>

<div class="row">
    <div class="col-md-5">
        {% if product.image %}
            <img src="{{ product.image.url }}" class="img-fluid" alt="{{ product.name }}">
        {% else %}
            <img src="{% static 'img/no_image.png' %}" class="img-fluid" alt="No image available">
        {% endif %}
    </div>
    <div class="col-md-7">
        <h2>{{ product.name }}</h2>
        <p class="text-muted">{{ product.category }}</p>
        <p class="lead price">â‚¹{{ product.price|floatformat:2 }}</p>

        {% if product.stock > 0 %}
            <p><span class="badge bg-success">In Stock ({{ product.stock }})</span></p>
            <form action="{% url 'cart:cart_add' product.id %}" method="post" class="d-flex align-items-center mb-3">
                {% csrf_token %}
                <label for="quantity" class="form-label me-2">Quantity:</label>
                <input type="number" name="quantity" id="quantity" value="1" min="1" max="{{ product.stock }}" class="form-control" style="width: 80px;">
                <button type="submit" class="btn btn-warning btn-lg ms-3">Add to Cart</button>
            </form>
        {% else %}
            <p><span class="badge bg-danger">Out of Stock</span></p>
        {% endif %}

        <hr>
        <h4>Description</h4>
        <p>{{ product.description|linebreaksbr }}</p>
    </div>
</div>
{% endblock %}